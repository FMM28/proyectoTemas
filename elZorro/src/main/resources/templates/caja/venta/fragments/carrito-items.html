<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="carrito-contenido">
    <div th:if="${carrito.detalles.empty}" class="text-center py-8 text-gray-500">
        <p>El carrito está vacío</p>
        <p class="mt-2">Agrega productos desde la sección de búsqueda</p>
    </div>

    <table class="min-w-full divide-y divide-gray-200" th:unless="${carrito.detalles.empty}">
        <thead>
        <tr>
            <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Producto</th>
            <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Precio</th>
            <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cantidad</th>
            <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Subtotal</th>
            <th class="px-4 py-3 bg-gray-50"></th>
        </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
        <tr th:each="detalle : ${carrito.detalles}">
            <td class="px-4 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900" th:text="${detalle.producto.nombre}"></div>
            </td>
            <td class="px-4 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900" th:text="${#numbers.formatDecimal(detalle.precioUnitario, 1, 2)}"></div>
            </td>
            <td class="px-4 py-4 whitespace-nowrap">
                <input type="number" min="1" th:value="${detalle.cantidad}"
                       onchange="modificarCantidad([[${detalle.producto.id}]], this.value)"
                       class="w-20 border rounded px-2 py-1 text-sm">
            </td>
            <td class="px-4 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900"
                     th:text="${#numbers.formatDecimal(detalle.precioUnitario * detalle.cantidad, 1, 2)}"></div>
            </td>
            <td class="px-4 py-4 whitespace-nowrap text-right text-sm font-medium">
                <button type="button"
                        onclick="eliminarProducto([[${detalle.producto.id}]])"
                        class="text-red-600 hover:text-red-900">Eliminar</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>