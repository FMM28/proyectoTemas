<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="productos-lista">
    <div th:if="${productos == null or #lists.isEmpty(productos)}">
        No se encontraron productos
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" th:unless="${productos == null}">
        <div th:each="producto : ${productos}" class="border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow">
            <div class="p-4">
                <h3 class="font-medium text-gray-900" th:text="${producto.nombre}"></h3>
                <p class="text-gray-600 mt-1" th:text="'$' + ${#numbers.formatDecimal(producto.precio, 1, 2)}"></p>
                <p class="text-sm mt-2" th:class="${producto.stock > 0 ? 'text-green-600' : 'text-red-600'}">
                    <span th:text="${producto.stock}"></span> en stock
                </p>
                <button type="button" th:disabled="${producto.stock == 0}"
                        th:class="${producto.stock == 0 ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'}"
                        class="mt-3 w-full text-white py-2 px-4 rounded"
                        th:onclick="agregarProducto([(${producto.id})])">
                    <span th:if="${producto.stock > 0}">Agregar al carrito</span>
                    <span th:if="${producto.stock == 0}">Sin stock</span>
                </button>
            </div>
        </div>
    </div>
</div>
</body>
</html>