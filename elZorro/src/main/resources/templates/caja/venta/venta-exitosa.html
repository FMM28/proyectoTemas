<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Venta Exitosa</title>
    <script src="https://kit.fontawesome.com/a2e0ff9c7c.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center px-4">
<div class="bg-white rounded-lg shadow-md p-6 max-w-6xl w-full">
    <h2 class="text-3xl font-bold text-center text-rose-600 mb-8">Venta Exitosa</h2>

    <!-- Mensaje de éxito -->
    <div class="bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded-lg mb-8 text-center text-sm">
        <i class="fas fa-check-circle mr-2"></i> ¡La venta se ha realizado exitosamente!
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Columna izquierda: Información de la venta -->
        <div class="md:col-span-2 space-y-6">
            <div class="bg-gray-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Detalles de la Venta</h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm text-gray-500">ID de Venta</p>
                        <p class="font-medium" th:text="'#' + ${venta.id}">#12345</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Fecha</p>
                        <p class="font-medium" th:text="${#temporals.format(venta.fecha, 'dd/MM/yyyy HH:mm')}">27/05/2025 14:35</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Cliente</p>
                        <p class="font-medium" th:text="${venta.cliente.nombre}">Juan Pérez</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Total</p>
                        <p class="font-medium text-green-700" th:text="'$' + ${#numbers.formatDecimal(Mitotal, 1, 'COMMA', 2, 'POINT')}">$1,500.00</p>
                    </div>
                </div>
            </div>

            <div class="bg-gray-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Productos Vendidos</h3>

                <ul class="space-y-3">
                    <li th:each="detalle : ${detalles}" class="flex justify-between border-b pb-2">
                        <span th:text="${detalle.producto.nombre}">Producto</span>
                        <span th:text="${detalle.cantidad} + ' x $' + ${#numbers.formatDecimal(detalle.precioUnitario, 1, 'COMMA', 2, 'POINT')}">1 x $250.00</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Columna derecha: Acciones -->
        <div class="space-y-6">
            <div class="bg-gray-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Acciones</h3>

                <div class="space-y-4">

                    <form th:action="@{/envia_recibo}" method="post">
                        <!-- Campo oculto para el ID de la venta -->
                        <input type="hidden" name="id" th:value="${venta.id}" />

                        <!-- Botón para enviar el formulario -->
                        <button type="submit"
                                class="btn btn-primary w-full bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors font-medium flex items-center justify-center">
                            Enviar recibo
                        </button>
                    </form>


                    <a th:href="@{/caja}"
                       class="w-full bg-gray-600 text-white px-6 py-3 rounded-xl hover:bg-gray-700 transition-colors font-medium flex items-center justify-center">
                        <i class="fas fa-arrow-left mr-2"></i> Volver al inicio
                    </a>
                </div>
            </div>

            <div class="bg-gray-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Información Adicional</h3>

                <div class="space-y-2">
                    <p class="text-sm text-gray-500">Registrado por</p>
                    <p class="font-mono text-sm" th:text="${venta.empleado.nombre}">Luis Mendoza</p>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
